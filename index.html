<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Seoul & Saigon, One Story to Tell | The Unfiltered Trail</title>
    <meta name="description" content="Field-tested guides for Aussies traveling Korea & Vietnam. Real costs, no sponsored fluff.">
    <meta name="keywords" content="travel blog, Asia travel, Seoul, Saigon, backpacker guide, Korea, Vietnam">
    <meta name="author" content="Trail Explorer">
    
    <!-- Open Graph Tags -->
    <meta property="og:title" content="The Unfiltered Trail - Seoul & Saigon Travel Guide">
    <meta property="og:description" content="Field-tested guides for Aussies traveling Korea & Vietnam. Real costs, no sponsored fluff.">
    <meta property="og:image" content="images/Whisk_a35f7a9c81.jpg">
    <meta property="og:url" content="https://theunfilteredtrail.com">
    <meta property="og:type" content="website">
    
    <!-- Twitter Card Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="The Unfiltered Trail - Seoul & Saigon Travel Guide">
    <meta name="twitter:description" content="Field-tested guides for Aussies traveling Korea & Vietnam.">
    <meta name="twitter:image" content="images/Whisk_a35f7a9c81.jpg">
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600&family=Inter:wght@400;600&display=swap" rel="stylesheet">
    
    <!-- Stylesheet -->
    <link rel="stylesheet" href="css/style.css">
    
    <!-- Structured Data -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "Blog",
        "name": "The Unfiltered Trail",
        "description": "Field-tested guides for Aussies traveling Korea & Vietnam. Real costs, no sponsored fluff.",
        "url": "https://theunfilteredtrail.com",
        "author": {
            "@type": "Person",
            "name": "Trail Explorer"
        },
        "publisher": {
            "@type": "Organization",
            "name": "The Unfiltered Trail"
        }
    }
    </script>
</head>
<body>
    <header>
        <nav class="container">
            <a href="index.html" class="logo">The Unfiltered Trail</a>
            <div class="mobile-menu-toggle">
                <span></span>
                <span></span>
                <span></span>
            </div>
            <ul class="nav-menu">
                <li><a href="#home">Home</a></li>
                <li><a href="#posts">Posts</a></li>
                <li><a href="#categories">Categories</a></li>
                <li><a href="about.html">About</a></li>
                <li><a href="#contact">Contact</a></li>
                <li id="writePostMenu" style="display: none;"><a href="create-post.html" style="background:var(--accent);color:white;padding:0.5rem 1rem;border-radius:8px;font-weight:600;">‚ú® Write</a></li>
                <li id="adminMenu" style="display: none;">
                    <div style="display: flex; align-items: center; gap: 0.5rem;">
                        <span id="adminIndicator" style="background:var(--primary);color:white;padding:0.25rem 0.75rem;border-radius:15px;font-size:0.75rem;font-weight:600;">üëë Admin</span>
                        <button id="logoutBtn" style="background:var(--light);color:white;border:none;padding:0.5rem 1rem;border-radius:8px;font-weight:600;cursor:pointer;font-size:0.85rem;">üö™ Logout</button>
                    </div>
                </li>
            </ul>
        </nav>
    </header>

    <main>
        <!-- Ad Space -->
        <div class="container">
            <div class="ad-space header">
                <small>Advertisement Space (728x90)</small>
            </div>
        </div>

        <section id="home" class="hero" style="background-image: url('images/Whisk_a35f7a9c81.jpg');">
            <div class="container">
                <div class="hero-content">
                    <h1>Two Cities, One Story to Tell</h1>
                    <p>From Aussie backpacker to local insider‚Äîflip through my unfiltered guide to Asia's most vibrant cities.</p>
                    <div class="hero-cta">
                        <a href="#posts" class="btn btn-primary">Start Exploring</a>
                        <a href="about.html" class="btn btn-secondary">About the Trail</a>
                    </div>
                </div>
            </div>
        </section>

        <section id="posts" class="container">
            <h2 class="section-title">Latest Adventures</h2>
            <div class="filters">
                <select id="regionFilter">
                    <option value="">All Regions</option>
                    <option value="Asia">Asia</option>
                </select>
                <input type="text" id="searchInput" placeholder="Search posts...">
                <select id="sortFilter">
                    <option value="date">Newest First</option>
                    <option value="title">Title A-Z</option>
                </select>
                <button id="clearFiltersBtn" class="btn btn-secondary" style="display:none;">Clear Filters</button>
            </div>
            <div class="grid posts-grid" id="postsGrid"></div>
        </section>

        <section id="categories" class="container">
            <h2 class="section-title">Explore by Category</h2>
            <div class="grid categories-grid">
                <div class="card category" data-category="K-Culture & Palaces">
                    <img src="images/Whisk_e2ad5b5a05.jpg" alt="K-Culture & Palaces">
                    <div class="card-content">
                        <h3>K-Culture & Palaces</h3>
                    </div>
                </div>
                <div class="card category" data-category="Street Food & Night Markets">
                    <img src="images/Whisk_eeba1b7b17.jpg" alt="Street Food & Night Markets">
                    <div class="card-content">
                        <h3>Street Food & Night Markets</h3>
                    </div>
                </div>
                <div class="card category" data-category="Mountains & Rice Terraces">
                    <img src="images/Whisk_864b9cd673.jpg" alt="Mountains & Rice Terraces">
                    <div class="card-content">
                        <h3>Mountains & Rice Terraces</h3>
                    </div>
                </div>
                <div class="card category" data-category="Beaches, Bays & Islands">
                    <img src="images/Whisk_fa8b5224e3.jpg" alt="Beaches, Bays & Islands">
                    <div class="card-content">
                        <h3>Beaches, Bays & Islands</h3>
                    </div>
                </div>
                <div class="card category" data-category="City Vibes & Night-life">
                    <img src="images/Whisk_7a1fb52413.jpg" alt="City Vibes & Night-life">
                    <div class="card-content">
                        <h3>City Vibes & Night-life</h3>
                    </div>
                </div>
                <div class="card category" data-category="Budget Hacks & Transport">
                    <img src="images/Whisk_38535193af.jpg" alt="Budget Hacks & Transport">
                    <div class="card-content">
                        <h3>Budget Hacks & Transport</h3>
                    </div>
                </div>
            </div>
        </section>

        <section id="about" class="container">
            <h2 class="section-title">About</h2>
            <div class="about">
                <h3>G'day! Living between Seoul's neon maze and Saigon's motorbike-filled streets</h3>
                <p>I became the go-to person for every Aussie mate planning their Asian escape.</p>
                <p>For years, the same questions kept popping up in my DMs: "Where do locals actually eat?", "What's worth seeing and what's a total rip-off?", "How do I not look like a complete tourist?" After the hundredth 2am text asking for my secret spots, I figured‚Äîwhy not put all the good oil in one place?</p>
                <p><strong>That's how this blog was born.</strong></p>
                <p>Think of me as that friend who's already made all the mistakes, found all the shortcuts, and keeps a running list of places actually worth your time and dollars. Welcome to the unfiltered truth about traveling South Korea and Vietnam‚Äîstraight from someone who calls both home.</p>
                <div style="text-align: center; margin-top: 2rem;">
                    <a href="about.html" class="btn btn-primary">Read Full Story</a>
                </div>
            </div>
        </section>

        <!-- Newsletter Section -->
        <section class="newsletter" id="contact">
            <div class="container">
                <h2>Stay on the Trail</h2>
                <p>Get the latest unfiltered guides and insider tips delivered monthly. No spam, just pure travel gold.</p>
                <form class="newsletter-form" id="newsletterForm">
                    <input type="email" id="emailInput" placeholder="Enter your email" required>
                    <button type="submit">Subscribe</button>
                </form>
            </div>
        </section>
    </main>

    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h4>The Unfiltered Trail</h4>
                    <p>Real travel guides for Seoul and Saigon adventures. No fluff, just the good stuff.</p>
                    <div class="social-links">
                        <a href="#" aria-label="Instagram">üì∑</a>
                        <a href="#" aria-label="Twitter">üê¶</a>
                        <a href="#" aria-label="Facebook">üìò</a>
                    </div>
                </div>
                <div class="footer-section">
                    <h4>Quick Links</h4>
                    <ul style="list-style: none;">
                        <li><a href="index.html">Home</a></li>
                        <li><a href="about.html">About</a></li>
                        <li><a href="#categories">Categories</a></li>
                        <li><a href="#contact">Contact</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>Legal</h4>
                    <ul style="list-style: none;">
                        <li><a href="privacy.html">Privacy Policy</a></li>
                        <li><a href="terms.html">Terms of Service</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2024 The Unfiltered Trail. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script>
        // posts.jsonÏóêÏÑú Ìè¨Ïä§Ìä∏ Î∂àÎü¨Ïò§Í∏∞ (Ï†ïÏ†Å ÏõπÏÇ¨Ïù¥Ìä∏Ïö©)
        async function loadAllPosts() {
            try {
                const response = await fetch('posts.json');
                if (!response.ok) {
                    throw new Error('Failed to load posts');
                }
                const data = await response.json();
                
                // Ìè¨Ïä§Ìä∏ Îç∞Ïù¥ÌÑ∞Î•º ÌëúÏãú ÌòïÏãùÏúºÎ°ú Î≥ÄÌôò
                const formattedPosts = data.posts.map(post => ({
                    id: post.id,
                    title: post.title,
                    slug: post.slug,
                    region: post.region || "Asia",
                    category: post.categories || [],
                    categories: post.categories || [],
                    thumb: post.images && post.images.length > 0 ? post.images[0].url : "https://images.unsplash.com/photo-1488646953014-85cb44e25828?w=400",
                    excerpt: post.excerpt || (post.content.substring(0, 100) + (post.content.length > 100 ? "..." : "")),
                    publishDate: post.publishDate || post.createdAt.split('T')[0],
                    fullContent: post.content,
                    images: post.images || [],
                    featured: post.featured || false
                }));

                return formattedPosts.sort((a, b) => new Date(b.publishDate) - new Date(a.publishDate));
            } catch (error) {
                console.error('Error loading posts:', error);
                
                // localStorage Î∞±ÏóÖ ÏãúÏä§ÌÖú (Î°úÏª¨ Í∞úÎ∞úÏö©)
                /* 
                const userPosts = JSON.parse(localStorage.getItem('blogPosts') || '[]');
                const formattedUserPosts = userPosts.map(post => ({
                    id: post.id,
                    title: post.title,
                    slug: `post-${post.slug}`,
                    region: "Asia",
                    category: post.categories || [],
                    categories: post.categories || [],
                    thumb: post.images && post.images.length > 0 ? post.images[0].url : "https://images.unsplash.com/photo-1488646953014-85cb44e25828?w=400",
                    excerpt: post.content.substring(0, 100) + (post.content.length > 100 ? "..." : ""),
                    publishDate: post.createdAt ? post.createdAt.split('T')[0] : new Date().toISOString().split('T')[0],
                    fullContent: post.content,
                    images: post.images || []
                }));
                return formattedUserPosts.sort((a, b) => new Date(b.publishDate) - new Date(a.publishDate));
                */
                
                return []; // Îπà Î∞∞Ïó¥ Î∞òÌôò
            }
        }

        // Ï†ÑÏó≠ Ìè¨Ïä§Ìä∏ Î≥ÄÏàò
        let posts = [];

        const postsGrid = document.getElementById('postsGrid');
        const searchInput = document.getElementById('searchInput');
        const regionFilter = document.getElementById('regionFilter');
        const sortFilter = document.getElementById('sortFilter');
        const clearFiltersBtn = document.getElementById('clearFiltersBtn');
        const newsletterForm = document.getElementById('newsletterForm');
        const emailInput = document.getElementById('emailInput');

        function renderPosts(postsToRender = posts) {
            if (postsToRender.length === 0) {
                const isAdmin = isAdminLoggedIn();
                postsGrid.innerHTML = `
                    <div style="grid-column: 1 / -1; text-align: center; padding: 4rem 2rem; background: var(--white); border-radius: 16px; box-shadow: 0 8px 30px rgba(30, 58, 95, 0.1);">
                        <div style="font-size: 4rem; margin-bottom: 1rem; opacity: 0.5;">üìù</div>
                        <h3 style="color: var(--primary); margin-bottom: 1rem; font-family: 'Playfair Display', serif;">No Posts Yet</h3>
                        <p style="color: var(--light); margin-bottom: 2rem;">
                            ${isAdmin 
                                ? 'Ready to share your travel adventures? Create your first post to get started!' 
                                : 'Check back soon for amazing travel stories and guides!'
                            }
                        </p>
                        ${isAdmin ? `
                            <a href="create-post.html" style="
                                background: var(--accent); 
                                color: white; 
                                padding: 1rem 2rem; 
                                border-radius: 12px; 
                                text-decoration: none; 
                                font-weight: 600; 
                                display: inline-block;
                                transition: all 0.3s ease;
                            " onmouseover="this.style.transform='translateY(-2px)'" onmouseout="this.style.transform='translateY(0)'">
                                ‚ú® Create First Post
                            </a>
                        ` : ''}
                    </div>
                `;
                return;
            }

            postsGrid.innerHTML = postsToRender.map(post => `
                <article class="card" style="position: relative;">
                    <div onclick="handlePostClick('${post.slug}', false, '${post.id || ''}')" style="cursor: pointer;">
                        <img src="${post.thumb}" alt="${post.title}" loading="lazy" onerror="this.style.display='none'">
                        <div class="card-content">
                            <div class="card-meta">
                                <span class="card-category">Asia</span>
                                <time datetime="${post.publishDate}">${new Date(post.publishDate).toLocaleDateString('en-AU')}</time>
                            </div>
                            <h3>${post.title}</h3>
                            <p class="card-excerpt">${post.excerpt}</p>
                            <div class="card-author">
                                <span>üë§ Trail Explorer</span>
                            </div>
                        </div>
                    </div>
                    <div class="post-actions admin-button" style="position: absolute; top: 0.5rem; right: 0.5rem; display: none; gap: 0.25rem; opacity: 0; transition: opacity 0.3s;">
                        <button onclick="editPost('${post.id}'); event.stopPropagation();" 
                                class="action-btn edit-btn" 
                                aria-label="Edit ${post.title}"
                                title="Edit post"
                                style="background:rgba(255,255,255,0.9);border:none;border-radius:50%;width:32px;height:32px;display:flex;align-items:center;justify-content:center;cursor:pointer;font-size:0.9rem;transition:all 0.3s;box-shadow:0 2px 8px rgba(0,0,0,0.1);">
                            ‚úèÔ∏è
                        </button>
                        <button onclick="deletePost('${post.id}'); event.stopPropagation();" 
                                class="action-btn delete-btn" 
                                aria-label="Delete ${post.title}"
                                title="Delete post"
                                style="background:rgba(255,255,255,0.9);border:none;border-radius:50%;width:32px;height:32px;display:flex;align-items:center;justify-content:center;cursor:pointer;font-size:0.9rem;transition:all 0.3s;box-shadow:0 2px 8px rgba(0,0,0,0.1);">
                            üóëÔ∏è
                        </button>
                    </div>
                </article>
            `).join('');
        }

        // Ìè¨Ïä§Ìä∏ ÌÅ¥Î¶≠ Ï≤òÎ¶¨
        function handlePostClick(slug, isDefault, postId) {
            // Ï†ïÏ†Å ÏÇ¨Ïù¥Ìä∏: posts/[slug].htmlÎ°ú Ïù¥Îèô
            window.location.href = `posts/${slug}.html`;
            
            // localStorage ÏãúÏä§ÌÖú (Ï£ºÏÑù Ï≤òÎ¶¨)
            // window.location.href = `post.html?id=${postId}`;
        }

        async function filterAndSortPosts() {
            posts = await loadAllPosts();
            let filtered = [...posts];
            const searchValue = searchInput.value.toLowerCase();
            const regionValue = regionFilter.value;
            const sortValue = sortFilter.value;

            const hasFilters = searchValue || regionValue;
            
            if (searchValue) {
                filtered = filtered.filter(post => {
                    const titleMatch = post.title.toLowerCase().includes(searchValue);
                    const excerptMatch = post.excerpt.toLowerCase().includes(searchValue);
                    const contentMatch = post.fullContent && post.fullContent.toLowerCase().includes(searchValue);
                    
                    const categoryMatch = (post.categories && post.categories.some(cat => 
                        cat.toLowerCase().includes(searchValue)
                    )) || (post.category && post.category.some(cat => 
                        cat.toLowerCase().includes(searchValue)
                    ));
                    
                    return titleMatch || excerptMatch || contentMatch || categoryMatch;
                });
            }

            if (regionValue) {
                filtered = filtered.filter(post => post.region === regionValue);
            }

            if (sortValue === 'title') {
                filtered.sort((a, b) => a.title.localeCompare(b.title));
            } else if (sortValue === 'date') {
                filtered.sort((a, b) => new Date(b.publishDate) - new Date(a.publishDate));
            }

            clearFiltersBtn.style.display = hasFilters ? 'block' : 'none';
            renderPosts(filtered);
        }

        function filterByCategory(category) {
            posts = loadAllPosts();
            
            const filtered = posts.filter(post => {
                const hasCategory = (post.categories && post.categories.includes(category)) || 
                                  (post.category && post.category.includes(category));
                return hasCategory;
            });
            
            clearFiltersBtn.style.display = 'block';
            renderPosts(filtered);
            document.getElementById('posts').scrollIntoView({ behavior: 'smooth' });
        }

        function clearAllFilters() {
            searchInput.value = '';
            regionFilter.value = '';
            clearFiltersBtn.style.display = 'none';
            posts = loadAllPosts();
            renderPosts(posts);
        }

        searchInput.addEventListener('input', filterAndSortPosts);
        regionFilter.addEventListener('change', filterAndSortPosts);
        sortFilter.addEventListener('change', filterAndSortPosts);
        clearFiltersBtn.addEventListener('click', clearAllFilters);

        document.querySelectorAll('.category').forEach(card => {
            card.addEventListener('click', () => {
                const category = card.dataset.category;
                filterByCategory(category);
            });
            
            card.addEventListener('keydown', (e) => {
                if (e.key === 'Enter' || e.key === ' ') {
                    e.preventDefault();
                    const category = card.dataset.category;
                    filterByCategory(category);
                }
            });
        });

        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) target.scrollIntoView({ behavior: 'smooth' });
            });
        });

        newsletterForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            const email = emailInput.value;
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            
            if (!emailRegex.test(email)) {
                alert('Please enter a valid email address.');
                return;
            }

            try {
                // Mailchimp integration would go here
                alert('Thanks for subscribing! Check your email for confirmation.');
                emailInput.value = '';
            } catch (error) {
                alert('Something went wrong. Please try again later.');
            }
        });

        // Ìè¨Ïä§Ìä∏ ÏàòÏ†ï Ìï®Ïàò
        function editPost(postId) {
            window.location.href = `edit-post.html?id=${postId}`;
        }

        // Ìè¨Ïä§Ìä∏ ÏÇ≠Ï†ú Ìï®Ïàò
        function deletePost(postId) {
            const posts = JSON.parse(localStorage.getItem('blogPosts') || '[]');
            const post = posts.find(p => p.id === postId);
            
            if (!post) {
                alert('Post not found.');
                return;
            }

            const confirmMessage = `Are you sure you want to delete "${post.title}"?\n\nThis action cannot be undone.`;
            
            if (confirm(confirmMessage)) {
                try {
                    const updatedPosts = posts.filter(p => p.id !== postId);
                    localStorage.setItem('blogPosts', JSON.stringify(updatedPosts));
                    
                    alert('Post deleted successfully!');
                    window.location.reload();
                } catch (error) {
                    alert('Error deleting post. Please try again.');
                    console.error('Error deleting post:', error);
                }
            }
        }

        // Í¥ÄÎ¶¨Ïûê Ïù∏Ï¶ù Í¥ÄÎ†® Ìï®ÏàòÎì§
        function isAdminLoggedIn() {
            try {
                const adminSession = JSON.parse(sessionStorage.getItem('adminSession') || '{}');
                return adminSession.isAdmin === true;
            } catch {
                return sessionStorage.getItem('isAdmin') === 'true';
            }
        }

        function updateAdminUI() {
            const isAdmin = isAdminLoggedIn();
            const writePostMenu = document.getElementById('writePostMenu');
            const adminMenu = document.getElementById('adminMenu');
            const adminButtons = document.querySelectorAll('.admin-button');

            if (isAdmin) {
                writePostMenu.style.display = 'block';
                adminMenu.style.display = 'block';
                
                adminButtons.forEach(button => {
                    button.style.display = 'flex';
                });
            } else {
                writePostMenu.style.display = 'none';
                adminMenu.style.display = 'none';
                
                adminButtons.forEach(button => {
                    button.style.display = 'none';
                });
            }
        }

        function logout() {
            if (confirm('Are you sure you want to logout from admin panel?')) {
                sessionStorage.removeItem('adminSession');
                sessionStorage.removeItem('isAdmin');
                updateAdminUI();
                alert('Successfully logged out from admin panel.');
                window.location.reload();
            }
        }

        // Î°úÍ∑∏ÏïÑÏõÉ Î≤ÑÌäº Ïù¥Î≤§Ìä∏ Î¶¨Ïä§ÎÑà
        document.addEventListener('DOMContentLoaded', () => {
            const logoutBtn = document.getElementById('logoutBtn');
            if (logoutBtn) {
                logoutBtn.addEventListener('click', logout);
            }
            
            updateAdminUI();
        });

        // Ìè¨Ïä§Ìä∏ Î†åÎçîÎßÅ ÌõÑ Í¥ÄÎ¶¨Ïûê UI ÏóÖÎç∞Ïù¥Ìä∏
        const originalRenderPosts = renderPosts;
        renderPosts = function(postsToRender) {
            originalRenderPosts(postsToRender);
            updateAdminUI();
        };

        // Ï¥àÍ∏∞ Î†åÎçîÎßÅÏùÄ DOMContentLoadedÏóêÏÑú Ï≤òÎ¶¨
    </script>
</body>
</html>